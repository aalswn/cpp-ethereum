version: 1
machine:
  xcode:
    version: 9.0

dependencies:
  override:
    - echo $PATH
    - echo $HOMEBREW_PREFIX
    - make --version
    - python --version
    - pip install requests
    - brew install cmake ninja leveldb libmicrohttpd

test:
  override:
    - echo $PATH
    - git submodule update --init --depth 50
    - pwd
    - ls -l
    - mkdir -p build && cd build
    - clang --version
    - cmake --version
    - make --version
    - ninja --version
    - cd build && cmake .. -G Ninja
    - cmake --build build --target hunter_upload_cache
    - cd build && ninja -j8
    - ETHEREUM_TEST_PATH=test/jsontests build/test/testeth

